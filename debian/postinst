#!/bin/sh
# postinst script for sshgo

set -e

# Создаем пользовательский конфиг если не существует
if [ ! -f "$HOME/.config/sshgo/connections.conf" ]; then
    mkdir -p "$HOME/.config/sshgo"
    if [ -f /etc/sshgo/connections.conf.example ]; then
        cp /etc/sshgo/connections.conf.example "$HOME/.config/sshgo/connections.conf"
        chmod 600 "$HOME/.config/sshgo/connections.conf"
    fi
fi

# Completion скрипт установлен в /usr/share/bash-completion/completions/sshgo
# Он автоматически загружается в Bash и ZSH

# Обновляем кэш completion
if command -v update-bash-completion >/dev/null 2>&1; then
    update-bash-completion
fi

echo "SSH Connection Manager установлен!"
echo "Используйте 'sshgo help' для справки"
echo "Конфиг: ~/.config/sshgo/connections.conf"

# DEBHELPER
exit 0

